<% content_for :canonical, "#{featured_topic_person_url(@person, @featured_topic, format: :html)}" %>
<% content_for :title, "#{@person.name} Quotes on #{@featured_topic.topic.name}" %>
<% content_for :description, "Quotes by #{@person.name}. Best collection of #{@person.name} quotes. Read, comment and share these quotes."%>

<% if @person.social_image.present? && @person.social_image.facebook.present? %>
  <% content_for :facebook_image, @person.social_image.facebook %>
<% end %>

<% content_for :content do %>
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8">
    <h1 class="main-title text-center"><%= "#{@person.name} Quotes on #{@featured_topic.topic.name}" %></h1>
    
    <% @quotes.each do |quote| %>
      <%= render partial: "people/quote", locals: {quote: quote, context: @person} %>
    <% end %>
  
    <div class="text-center">
      <%= paginate @quotes, :views_prefix => 'kaminari_bootstrap' %>
    </div>    
    
    <p>Last Updated - <time itemprop="dateModified" datetime="<%= @person.updated_at.to_datetime %>"><%= @person.updated_at.to_datetime.strftime("%B %d, %Y")  %></time></p>
  </div>
  
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-4">
    <%= render "partials/facebook_like_box" %>  
    <% if @person.featured_topics.where.not(id: [@featured_topic.id]).any? %>
      <div class="panel panel-default panel-shadow text-center">
        <div class="panel-heading">
          <div class="panel-title"><%= @person.name %> Quotes by topic</div>
        </div>
        <div class="panel-body">
          <div class="row">
            <% @person.featured_topics.where.not(id: [@featured_topic.id]).each do |ft| %>
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <%= link_to "#{@person.name} Quotes on #{ft.topic.name}", featured_topic_person_url(@person, featured_topic: ft, format: :html), class: "link-box text-center" %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  
    <% if @person.books.any? %>
      <div class="panel panel-default panel-shadow text-center">
        <div class="panel-heading">
          <div class="panel-title">Books by <%= @person.name %></div>
        </div>
        <div class="panel-body">
          <div class="row">
            <% @person.books.each do |book| %>
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <%= book.published? ? (link_to book.name, book_url(book), class: "link-box text-center") : (book.name) %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>    
  </div>
<% end %>